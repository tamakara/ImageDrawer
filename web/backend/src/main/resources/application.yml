spring:
  application:
    name: bakabooru

  # Spring Boot Admin 配置
  boot:
    admin:
      client:
        url: http://localhost:8080/admin
      context-path: /admin

  # 数据库配置 (使用 SQLite)
  datasource:
    url: jdbc:sqlite:${app.data-dir}/db/data.sqlite
    driver-class-name: org.sqlite.JDBC
    username: ""
    password: ""

  # JPA / Hibernate 配置
  jpa:
    database-platform: org.hibernate.community.dialect.SQLiteDialect
    show-sql: true
    hibernate:
      ddl-auto: none
    open-in-view: false

  # Flyway 数据库迁移
  flyway:
    enabled: true
    locations: classpath:db/migration

  # 文件上传限制
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB

server:
  address: 0.0.0.0
  port: 8080
  servlet:
    context-path: /
  error:
    include-message: always

# 监控端点配置
management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: "*"

# 应用自定义配置
app:
  # 数据存储目录
  data-dir: data
  # AI 服务地址
  ai-service:
    url: http://0.0.0.0:8081