<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/frontend/src/api/index.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/api/index.ts" />
              <option name="updatedContent" value="// 图片相关的类型定义&#10;export interface Image {&#10;  hash: string&#10;  filename: string&#10;  path: string&#10;  size: number&#10;  width: number&#10;  height: number&#10;  format: string&#10;  createdAt: string&#10;  updatedAt: string&#10;  tags?: string[]&#10;  description?: string&#10;}&#10;&#10;// 图片查询参数&#10;export interface ImageQueryParams {&#10;  page: number&#10;  size: number&#10;  tags?: string[]&#10;  filename?: string&#10;  sortBy?: 'createdAt' | 'filename' | 'size'&#10;  sortOrder?: 'asc' | 'desc'&#10;}&#10;&#10;// 分页响应&#10;export interface PageResponse&lt;T&gt; {&#10;  content: T[]&#10;  totalElements: number&#10;  totalPages: number&#10;  page: number&#10;  size: number&#10;  first: boolean&#10;  last: boolean&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/components/ImageInfo.vue">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/ImageInfo.vue" />
              <option name="updatedContent" value="&lt;template&gt;&#10;  &lt;div class=&quot;image-info&quot;&gt;&#10;    &lt;!-- 头部操作区 --&gt;&#10;    &lt;div class=&quot;info-header&quot;&gt;&#10;      &lt;h3 class=&quot;image-title&quot;&gt;{{ image.filename }}&lt;/h3&gt;&#10;      &lt;el-button&#10;        type=&quot;text&quot;&#10;        size=&quot;large&quot;&#10;        :icon=&quot;Close&quot;&#10;        @click=&quot;$emit('close')&quot;&#10;        class=&quot;close-btn&quot;&#10;      /&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 基本信息 --&gt;&#10;    &lt;div class=&quot;info-section&quot;&gt;&#10;      &lt;h4 class=&quot;section-title&quot;&gt;基本信息&lt;/h4&gt;&#10;      &lt;div class=&quot;info-grid&quot;&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;文件名：&lt;/span&gt;&#10;          &lt;span class=&quot;value&quot;&gt;{{ image.filename }}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;格式：&lt;/span&gt;&#10;          &lt;span class=&quot;value&quot;&gt;{{ image.format.toUpperCase() }}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;尺寸：&lt;/span&gt;&#10;          &lt;span class=&quot;value&quot;&gt;{{ image.width }} × {{ image.height }}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;大小：&lt;/span&gt;&#10;          &lt;span class=&quot;value&quot;&gt;{{ formatFileSize(image.size) }}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;创建时间：&lt;/span&gt;&#10;          &lt;span class=&quot;value&quot;&gt;{{ formatDate(image.createdAt) }}&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;info-item&quot;&gt;&#10;          &lt;span class=&quot;label&quot;&gt;哈希值：&lt;/span&gt;&#10;          &lt;span class=&quot;value hash-value&quot; :title=&quot;image.hash&quot;&gt;{{ image.hash.substring(0, 16) }}...&lt;/span&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 标签信息 --&gt;&#10;    &lt;div class=&quot;info-section&quot;&gt;&#10;      &lt;h4 class=&quot;section-title&quot;&gt;标签&lt;/h4&gt;&#10;      &lt;div class=&quot;tags-container&quot;&gt;&#10;        &lt;el-tag&#10;          v-for=&quot;tag in image.tags&quot;&#10;          :key=&quot;tag&quot;&#10;          type=&quot;primary&quot;&#10;          effect=&quot;light&quot;&#10;          size=&quot;small&quot;&#10;          class=&quot;tag-item&quot;&#10;        &gt;&#10;          {{ tag }}&#10;        &lt;/el-tag&gt;&#10;        &lt;el-tag&#10;          v-if=&quot;!image.tags || image.tags.length === 0&quot;&#10;          type=&quot;info&quot;&#10;          effect=&quot;plain&quot;&#10;          size=&quot;small&quot;&#10;        &gt;&#10;          暂无标签&#10;        &lt;/el-tag&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 描述信息 --&gt;&#10;    &lt;div class=&quot;info-section&quot;&gt;&#10;      &lt;h4 class=&quot;section-title&quot;&gt;描述&lt;/h4&gt;&#10;      &lt;div class=&quot;description-container&quot;&gt;&#10;        &lt;p v-if=&quot;image.description&quot; class=&quot;description-text&quot;&gt;&#10;          {{ image.description }}&#10;        &lt;/p&gt;&#10;        &lt;p v-else class=&quot;no-description&quot;&gt;暂无描述&lt;/p&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 操作按钮 --&gt;&#10;    &lt;div class=&quot;info-actions&quot;&gt;&#10;      &lt;el-button type=&quot;primary&quot; size=&quot;small&quot; @click=&quot;downloadImage&quot;&gt;&#10;        &lt;el-icon&gt;&lt;Download /&gt;&lt;/el-icon&gt;&#10;        下载图片&#10;      &lt;/el-button&gt;&#10;      &lt;el-button type=&quot;default&quot; size=&quot;small&quot; @click=&quot;copyImageUrl&quot;&gt;&#10;        &lt;el-icon&gt;&lt;Link /&gt;&lt;/el-icon&gt;&#10;        复制链接&#10;      &lt;/el-button&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/template&gt;&#10;&#10;&lt;script setup lang=&quot;ts&quot;&gt;&#10;import { Close, Download, Link } from '@element-plus/icons-vue'&#10;import { ElMessage } from 'element-plus'&#10;import type { Image } from '../api'&#10;import { useImageStore } from '../stores/image'&#10;&#10;const props = defineProps&lt;{&#10;  image: Image&#10;}&gt;()&#10;&#10;defineEmits(['close'])&#10;&#10;const imageStore = useImageStore()&#10;&#10;// 格式化文件大小&#10;const formatFileSize = (bytes: number): string =&gt; {&#10;  if (bytes === 0) return '0 B'&#10;  const k = 1024&#10;  const sizes = ['B', 'KB', 'MB', 'GB']&#10;  const i = Math.floor(Math.log(bytes) / Math.log(k))&#10;  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]&#10;}&#10;&#10;// 格式化日期&#10;const formatDate = (dateString: string): string =&gt; {&#10;  const date = new Date(dateString)&#10;  return date.toLocaleDateString('zh-CN', {&#10;    year: 'numeric',&#10;    month: '2-digit',&#10;    day: '2-digit',&#10;    hour: '2-digit',&#10;    minute: '2-digit'&#10;  })&#10;}&#10;&#10;// 下载图片&#10;const downloadImage = () =&gt; {&#10;  const link = document.createElement('a')&#10;  link.href = imageStore.getImageUrl(props.image.hash)&#10;  link.download = props.image.filename&#10;  link.click()&#10;  ElMessage.success('开始下载图片')&#10;}&#10;&#10;// 复制图片链接&#10;const copyImageUrl = async () =&gt; {&#10;  try {&#10;    const url = imageStore.getImageUrl(props.image.hash)&#10;    await navigator.clipboard.writeText(url)&#10;    ElMessage.success('图片链接已复制到剪贴板')&#10;  } catch (error) {&#10;    ElMessage.error('复制失败，请手动复制')&#10;  }&#10;}&#10;&lt;/script&gt;&#10;&#10;&lt;style scoped&gt;&#10;.image-info {&#10;  padding: 24px;&#10;  height: 100%;&#10;  overflow-y: auto;&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 24px;&#10;}&#10;&#10;.info-header {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  padding-bottom: 16px;&#10;  border-bottom: 1px solid var(--el-border-color-light);&#10;}&#10;&#10;.image-title {&#10;  margin: 0;&#10;  font-size: 18px;&#10;  font-weight: 600;&#10;  color: var(--el-text-color-primary);&#10;  flex: 1;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  white-space: nowrap;&#10;}&#10;&#10;.close-btn {&#10;  padding: 8px;&#10;  color: var(--el-text-color-secondary);&#10;}&#10;&#10;.close-btn:hover {&#10;  color: var(--el-text-color-primary);&#10;}&#10;&#10;.info-section {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 12px;&#10;}&#10;&#10;.section-title {&#10;  margin: 0;&#10;  font-size: 16px;&#10;  font-weight: 600;&#10;  color: var(--el-text-color-primary);&#10;}&#10;&#10;.info-grid {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 12px;&#10;}&#10;&#10;.info-item {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;}&#10;&#10;.label {&#10;  font-weight: 500;&#10;  color: var(--el-text-color-secondary);&#10;  min-width: 80px;&#10;  flex-shrink: 0;&#10;}&#10;&#10;.value {&#10;  color: var(--el-text-color-primary);&#10;  flex: 1;&#10;  word-break: break-all;&#10;}&#10;&#10;.hash-value {&#10;  font-family: monospace;&#10;  font-size: 12px;&#10;  background: var(--el-fill-color-light);&#10;  padding: 2px 6px;&#10;  border-radius: 4px;&#10;  cursor: pointer;&#10;}&#10;&#10;.tags-container {&#10;  display: flex;&#10;  flex-wrap: wrap;&#10;  gap: 8px;&#10;}&#10;&#10;.tag-item {&#10;  margin: 0;&#10;}&#10;&#10;.description-container {&#10;  padding: 12px;&#10;  background: var(--el-fill-color-lighter);&#10;  border-radius: 8px;&#10;  border-left: 4px solid var(--el-color-primary);&#10;}&#10;&#10;.description-text {&#10;  margin: 0;&#10;  line-height: 1.6;&#10;  color: var(--el-text-color-primary);&#10;}&#10;&#10;.no-description {&#10;  margin: 0;&#10;  color: var(--el-text-color-secondary);&#10;  font-style: italic;&#10;}&#10;&#10;.info-actions {&#10;  display: flex;&#10;  gap: 12px;&#10;  margin-top: auto;&#10;  padding-top: 16px;&#10;  border-top: 1px solid var(--el-border-color-light);&#10;}&#10;&#10;.info-actions .el-button {&#10;  flex: 1;&#10;}&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/components/ImageViewer.vue">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/ImageViewer.vue" />
              <option name="originalContent" value="&lt;template&gt;&#10;  &lt;teleport to=&quot;body&quot;&gt;&#10;    &lt;div class=&quot;image-viewer-overlay&quot; @click=&quot;onClose&quot;&gt;&#10;      &lt;div class=&quot;viewer-content&quot; @click.stop&gt;&#10;          &lt;ImagePreview :url=&quot;imageStore.getImageUrl(image.hash)&quot;/&gt;&#10;          &lt;ImagePreview :url=&quot;imageStore.getImageUrl(image.hash)&quot;/&gt;&#10;}&#10;        &lt;div class=&quot;info-area&quot;&gt;&#10;          &lt;ImageInfo :image=&quot;image&quot; @close=&quot;onClose&quot;/&gt;&#10;        &lt;/div&gt;&#10;  box-shadow: var(--el-box-shadow);&#10;  display: flex;&#10;  border-radius: 8px;&#10;  overflow: hidden;&#10;}&#10;&#10;&#10;import type {Image} from &quot;../api&quot;&#10;  justify-content: center;&#10;import {useImageStore} from &quot;../stores/image&quot;&#10;  background: var(--el-bg-color-overlay);&#10;  padding: 20px;&#10;defineProps&lt;{&#10;}&#10;  max-width: 400px;&#10;  background: var(--el-bg-color);&#10;const emit = defineEmits([&quot;close&quot;])&#10;  overflow-y: auto;&#10;  max-height: 100%;&#10;" />
              <option name="updatedContent" value="&lt;template&gt;&#10;  &lt;teleport to=&quot;body&quot;&gt;&#10;    &lt;div class=&quot;image-viewer-overlay&quot; @click=&quot;handleOverlayClick&quot; @keydown.esc=&quot;onClose&quot;&gt;&#10;      &lt;div class=&quot;viewer-content&quot; @click.stop&gt;&#10;        &lt;!-- 图片显示区域 --&gt;&#10;        &lt;div class=&quot;image-area&quot;&gt;&#10;          &lt;ImagePreview :url=&quot;imageStore.getImageUrl(image.hash)&quot; /&gt;&#10;&#10;          &lt;!-- 导航按钮 --&gt;&#10;          &lt;div class=&quot;nav-controls&quot; v-if=&quot;showNavigation&quot;&gt;&#10;            &lt;el-button&#10;              circle&#10;              size=&quot;large&quot;&#10;              :icon=&quot;ArrowLeft&quot;&#10;              @click=&quot;$emit('previous')&quot;&#10;              class=&quot;nav-btn nav-prev&quot;&#10;              :disabled=&quot;!hasPrevious&quot;&#10;            /&gt;&#10;            &lt;el-button&#10;              circle&#10;              size=&quot;large&quot;&#10;              :icon=&quot;ArrowRight&quot;&#10;              @click=&quot;$emit('next')&quot;&#10;              class=&quot;nav-btn nav-next&quot;&#10;              :disabled=&quot;!hasNext&quot;&#10;            /&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;!-- 工具栏 --&gt;&#10;          &lt;div class=&quot;toolbar&quot;&gt;&#10;            &lt;div class=&quot;toolbar-left&quot;&gt;&#10;              &lt;el-button size=&quot;small&quot; :icon=&quot;ZoomIn&quot; @click=&quot;zoomIn&quot;&gt;放大&lt;/el-button&gt;&#10;              &lt;el-button size=&quot;small&quot; :icon=&quot;ZoomOut&quot; @click=&quot;zoomOut&quot;&gt;缩小&lt;/el-button&gt;&#10;              &lt;el-button size=&quot;small&quot; :icon=&quot;RefreshRight&quot; @click=&quot;resetZoom&quot;&gt;重置&lt;/el-button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;toolbar-right&quot;&gt;&#10;              &lt;el-button&#10;                size=&quot;small&quot;&#10;                :icon=&quot;infoVisible ? Hide : View&quot;&#10;                @click=&quot;toggleInfo&quot;&#10;              &gt;&#10;                {{ infoVisible ? '隐藏信息' : '显示信息' }}&#10;              &lt;/el-button&gt;&#10;              &lt;el-button size=&quot;small&quot; :icon=&quot;Close&quot; @click=&quot;onClose&quot;&gt;关闭&lt;/el-button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- 信息面板 --&gt;&#10;        &lt;transition name=&quot;slide-left&quot;&gt;&#10;          &lt;div v-if=&quot;infoVisible&quot; class=&quot;info-area&quot;&gt;&#10;            &lt;ImageInfo :image=&quot;image&quot; @close=&quot;onClose&quot; /&gt;&#10;          &lt;/div&gt;&#10;        &lt;/transition&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  &lt;/teleport&gt;&#10;&lt;/template&gt;&#10;&#10;&lt;script setup lang=&quot;ts&quot;&gt;&#10;import { ref, onMounted, onUnmounted } from 'vue'&#10;import { ArrowLeft, ArrowRight, ZoomIn, ZoomOut, RefreshRight, View, Hide, Close } from '@element-plus/icons-vue'&#10;import type { Image } from &quot;../api&quot;&#10;import ImagePreview from &quot;./ImagePreview.vue&quot;&#10;import { useImageStore } from &quot;../stores/image&quot;&#10;import ImageInfo from &quot;./ImageInfo.vue&quot;&#10;&#10;const props = defineProps&lt;{&#10;  image: Image&#10;  showNavigation?: boolean&#10;  hasPrevious?: boolean&#10;  hasNext?: boolean&#10;}&gt;()&#10;&#10;const emit = defineEmits([&quot;close&quot;, &quot;previous&quot;, &quot;next&quot;])&#10;&#10;const imageStore = useImageStore()&#10;const infoVisible = ref(true)&#10;const zoomLevel = ref(1)&#10;&#10;// 处理遮罩层点击&#10;const handleOverlayClick = (event: MouseEvent) =&gt; {&#10;  if (event.target === event.currentTarget) {&#10;    onClose()&#10;  }&#10;}&#10;&#10;// 关闭查看器&#10;const onClose = () =&gt; {&#10;  emit(&quot;close&quot;)&#10;}&#10;&#10;// 切换信息面板&#10;const toggleInfo = () =&gt; {&#10;  infoVisible.value = !infoVisible.value&#10;}&#10;&#10;// 缩放控制&#10;const zoomIn = () =&gt; {&#10;  zoomLevel.value = Math.min(zoomLevel.value * 1.2, 3)&#10;}&#10;&#10;const zoomOut = () =&gt; {&#10;  zoomLevel.value = Math.max(zoomLevel.value / 1.2, 0.1)&#10;}&#10;&#10;const resetZoom = () =&gt; {&#10;  zoomLevel.value = 1&#10;}&#10;&#10;// 键盘快捷键&#10;const handleKeydown = (event: KeyboardEvent) =&gt; {&#10;  switch (event.key) {&#10;    case 'Escape':&#10;      onClose()&#10;      break&#10;    case 'ArrowLeft':&#10;      if (props.hasPrevious) emit('previous')&#10;      break&#10;    case 'ArrowRight':&#10;      if (props.hasNext) emit('next')&#10;      break&#10;    case 'i':&#10;    case 'I':&#10;      toggleInfo()&#10;      break&#10;    case '+':&#10;    case '=':&#10;      zoomIn()&#10;      break&#10;    case '-':&#10;      zoomOut()&#10;      break&#10;    case '0':&#10;      resetZoom()&#10;      break&#10;  }&#10;}&#10;&#10;onMounted(() =&gt; {&#10;  document.addEventListener('keydown', handleKeydown)&#10;  document.body.style.overflow = 'hidden'&#10;})&#10;&#10;onUnmounted(() =&gt; {&#10;  document.removeEventListener('keydown', handleKeydown)&#10;  document.body.style.overflow = ''&#10;})&#10;&lt;/script&gt;&#10;&#10;&lt;style scoped&gt;&#10;.image-viewer-overlay {&#10;  position: fixed;&#10;  inset: 0;&#10;  background: rgba(0, 0, 0, 0.95);&#10;  backdrop-filter: blur(10px);&#10;  z-index: 2000;&#10;  display: flex;&#10;  justify-content: center;&#10;  align-items: center;&#10;  padding: 0;&#10;}&#10;&#10;.viewer-content {&#10;  width: 100vw;&#10;  height: 100vh;&#10;  display: flex;&#10;  position: relative;&#10;}&#10;&#10;.image-area {&#10;  flex: 1;&#10;  display: flex;&#10;  flex-direction: column;&#10;  position: relative;&#10;  background: var(--el-bg-color-page);&#10;  transition: all 0.3s ease;&#10;}&#10;&#10;.info-area {&#10;  width: 400px;&#10;  min-width: 350px;&#10;  max-width: 500px;&#10;  background: var(--el-bg-color);&#10;  border-left: 1px solid var(--el-border-color);&#10;  overflow: hidden;&#10;  flex-shrink: 0;&#10;}&#10;&#10;.nav-controls {&#10;  position: absolute;&#10;  top: 50%;&#10;  left: 0;&#10;  right: 0;&#10;  transform: translateY(-50%);&#10;  display: flex;&#10;  justify-content: space-between;&#10;  padding: 0 20px;&#10;  pointer-events: none;&#10;}&#10;&#10;.nav-btn {&#10;  pointer-events: auto;&#10;  background: rgba(0, 0, 0, 0.5) !important;&#10;  border: none !important;&#10;  color: white !important;&#10;  backdrop-filter: blur(8px);&#10;  transition: all 0.3s ease;&#10;}&#10;&#10;.nav-btn:hover:not(:disabled) {&#10;  background: rgba(0, 0, 0, 0.7) !important;&#10;  transform: scale(1.1);&#10;}&#10;&#10;.nav-btn:disabled {&#10;  opacity: 0.3;&#10;  cursor: not-allowed;&#10;}&#10;&#10;.toolbar {&#10;  position: absolute;&#10;  bottom: 20px;&#10;  left: 20px;&#10;  right: 20px;&#10;  display: flex;&#10;  justify-content: space-between;&#10;  align-items: center;&#10;  background: rgba(0, 0, 0, 0.8);&#10;  backdrop-filter: blur(10px);&#10;  padding: 12px 16px;&#10;  border-radius: 12px;&#10;  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.toolbar-left,&#10;.toolbar-right {&#10;  display: flex;&#10;  gap: 8px;&#10;}&#10;&#10;.toolbar .el-button {&#10;  background: transparent !important;&#10;  border: 1px solid rgba(255, 255, 255, 0.2) !important;&#10;  color: white !important;&#10;}&#10;&#10;.toolbar .el-button:hover {&#10;  background: rgba(255, 255, 255, 0.1) !important;&#10;  border-color: rgba(255, 255, 255, 0.3) !important;&#10;}&#10;&#10;/* 信息面板滑入动画 */&#10;.slide-left-enter-active,&#10;.slide-left-leave-active {&#10;  transition: all 0.3s ease;&#10;}&#10;&#10;.slide-left-enter-from {&#10;  transform: translateX(100%);&#10;  opacity: 0;&#10;}&#10;&#10;.slide-left-leave-to {&#10;  transform: translateX(100%);&#10;  opacity: 0;&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 768px) {&#10;  .viewer-content {&#10;    flex-direction: column;&#10;  }&#10;&#10;  .info-area {&#10;    width: 100%;&#10;    max-width: none;&#10;    height: 40vh;&#10;    border-left: none;&#10;    border-top: 1px solid var(--el-border-color);&#10;    min-width: auto;&#10;  }&#10;&#10;  .toolbar {&#10;    bottom: 10px;&#10;    left: 10px;&#10;    right: 10px;&#10;    padding: 8px 12px;&#10;  }&#10;&#10;  .toolbar-left,&#10;  .toolbar-right {&#10;    gap: 4px;&#10;  }&#10;&#10;  .toolbar .el-button {&#10;    padding: 4px 8px;&#10;    font-size: 12px;&#10;  }&#10;&#10;  .nav-controls {&#10;    padding: 0 10px;&#10;  }&#10;}&#10;&#10;/* 滑入动画在移动端的调整 */&#10;@media (max-width: 768px) {&#10;  .slide-left-enter-from,&#10;  .slide-left-leave-to {&#10;    transform: translateY(100%);&#10;  }&#10;}&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/components/business/image/index.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/business/image/index.ts" />
              <option name="updatedContent" value="// 图片相关组件统一导出&#10;export { default as ImageCard } from './ImageCard.vue'&#10;export { default as ImageGrid } from './ImageGrid.vue' &#10;export { default as ImageViewer } from './ImageViewer.vue'&#10;export { default as ImagePreview } from './ImagePreview.vue'&#10;export { default as ImageInfo } from './ImageInfo.vue'&#10;export { default as ImageGallery } from './ImageGallery.vue'" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/components/gallery/ImageGallery.vue">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/gallery/ImageGallery.vue" />
              <option name="updatedContent" value="&lt;template&gt;&#10;  &lt;div class=&quot;image-gallery&quot;&gt;&#10;    &lt;!-- 加载状态 --&gt;&#10;    &lt;div v-if=&quot;imageStore.loading&quot; class=&quot;loading-container&quot;&gt;&#10;      &lt;el-skeleton :rows=&quot;6&quot; animated /&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 空状态 --&gt;&#10;    &lt;el-empty&#10;      v-else-if=&quot;imageStore.isEmpty&quot;&#10;      description=&quot;暂无图片数据&quot;&#10;      class=&quot;empty-state&quot;&#10;    &gt;&#10;      &lt;el-button type=&quot;primary&quot; @click=&quot;imageStore.query&quot;&gt;刷新&lt;/el-button&gt;&#10;    &lt;/el-empty&gt;&#10;&#10;    &lt;!-- 图片网格 --&gt;&#10;    &lt;div v-else class=&quot;gallery-container&quot;&gt;&#10;      &lt;div class=&quot;gallery-grid&quot; :style=&quot;gridStyle&quot;&gt;&#10;        &lt;div&#10;          v-for=&quot;(image, index) in imageStore.images&quot;&#10;          :key=&quot;image.hash&quot;&#10;          class=&quot;gallery-item&quot;&#10;          @click=&quot;openViewer(image, index)&quot;&#10;        &gt;&#10;          &lt;el-image&#10;            :src=&quot;imageStore.getImageThumbnailUrl(image.hash)&quot;&#10;            :alt=&quot;image.filename&quot;&#10;            fit=&quot;cover&quot;&#10;            class=&quot;gallery-image&quot;&#10;            lazy&#10;          &gt;&#10;            &lt;template #placeholder&gt;&#10;              &lt;div class=&quot;image-placeholder&quot;&gt;&#10;                &lt;el-icon&gt;&lt;Picture /&gt;&lt;/el-icon&gt;&#10;              &lt;/div&gt;&#10;            &lt;/template&gt;&#10;            &lt;template #error&gt;&#10;              &lt;div class=&quot;image-error&quot;&gt;&#10;                &lt;el-icon&gt;&lt;PictureFilled /&gt;&lt;/el-icon&gt;&#10;              &lt;/div&gt;&#10;            &lt;/template&gt;&#10;          &lt;/el-image&gt;&#10;          &#10;          &lt;!-- 图片信息覆盖层 --&gt;&#10;          &lt;div class=&quot;image-overlay&quot;&gt;&#10;            &lt;div class=&quot;image-info&quot;&gt;&#10;              &lt;span class=&quot;filename&quot;&gt;{{ image.filename }}&lt;/span&gt;&#10;              &lt;span class=&quot;dimensions&quot;&gt;{{ image.width }} × {{ image.height }}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;!-- 分页 --&gt;&#10;      &lt;div v-if=&quot;imageStore.totalPages &gt; 1&quot; class=&quot;pagination-container&quot;&gt;&#10;        &lt;el-pagination&#10;          v-model:current-page=&quot;imageStore.params.page&quot;&#10;          :page-size=&quot;imageStore.params.size&quot;&#10;          :total=&quot;imageStore.totalElements&quot;&#10;          :page-sizes=&quot;[20, 50, 100, 200]&quot;&#10;          layout=&quot;total, sizes, prev, pager, next, jumper&quot;&#10;          @size-change=&quot;handleSizeChange&quot;&#10;          @current-change=&quot;handleCurrentChange&quot;&#10;        /&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 图片查看器 --&gt;&#10;    &lt;ImageViewer&#10;      v-if=&quot;selectedImage&quot;&#10;      :image=&quot;selectedImage&quot;&#10;      :show-navigation=&quot;true&quot;&#10;      :has-previous=&quot;selectedIndex &gt; 0&quot;&#10;      :has-next=&quot;selectedIndex &lt; imageStore.images.length - 1&quot;&#10;      @close=&quot;closeViewer&quot;&#10;      @previous=&quot;previousImage&quot;&#10;      @next=&quot;nextImage&quot;&#10;    /&gt;&#10;  &lt;/div&gt;&#10;&lt;/template&gt;&#10;&#10;&lt;script setup lang=&quot;ts&quot;&gt;&#10;import { ref, computed, onMounted, watch } from 'vue'&#10;import { Picture, PictureFilled } from '@element-plus/icons-vue'&#10;import type { Image } from '../../api'&#10;import { useImageStore } from '../../stores/image'&#10;import ImageViewer from '../ImageViewer.vue'&#10;&#10;const props = defineProps&lt;{&#10;  columnCount?: number&#10;  gap?: number&#10;}&gt;()&#10;&#10;const imageStore = useImageStore()&#10;const selectedImage = ref&lt;Image | null&gt;(null)&#10;const selectedIndex = ref(-1)&#10;&#10;// 网格样式&#10;const gridStyle = computed(() =&gt; ({&#10;  gridTemplateColumns: `repeat(${props.columnCount || 4}, 1fr)`,&#10;  gap: `${props.gap || 16}px`&#10;}))&#10;&#10;// 打开图片查看器&#10;const openViewer = (image: Image, index: number) =&gt; {&#10;  selectedImage.value = image&#10;  selectedIndex.value = index&#10;}&#10;&#10;// 关闭图片查看器&#10;const closeViewer = () =&gt; {&#10;  selectedImage.value = null&#10;  selectedIndex.value = -1&#10;}&#10;&#10;// 上一张图片&#10;const previousImage = () =&gt; {&#10;  if (selectedIndex.value &gt; 0) {&#10;    selectedIndex.value--&#10;    selectedImage.value = imageStore.images[selectedIndex.value]&#10;  }&#10;}&#10;&#10;// 下一张图片&#10;const nextImage = () =&gt; {&#10;  if (selectedIndex.value &lt; imageStore.images.length - 1) {&#10;    selectedIndex.value++&#10;    selectedImage.value = imageStore.images[selectedIndex.value]&#10;  }&#10;}&#10;&#10;// 处理分页大小变化&#10;const handleSizeChange = (size: number) =&gt; {&#10;  imageStore.params.size = size&#10;  imageStore.params.page = 1&#10;  imageStore.query()&#10;}&#10;&#10;// 处理页码变化&#10;const handleCurrentChange = (page: number) =&gt; {&#10;  imageStore.params.page = page&#10;  imageStore.query()&#10;}&#10;&#10;// 监听参数变化，重新查询&#10;watch(() =&gt; imageStore.params, () =&gt; {&#10;  imageStore.query()&#10;}, { deep: true })&#10;&#10;// 组件挂载时查询数据&#10;onMounted(() =&gt; {&#10;  if (imageStore.images.length === 0) {&#10;    imageStore.query()&#10;  }&#10;})&#10;&lt;/script&gt;&#10;&#10;&lt;style scoped&gt;&#10;.image-gallery {&#10;  height: 100%;&#10;  display: flex;&#10;  flex-direction: column;&#10;  background: var(--el-bg-color-page);&#10;}&#10;&#10;.loading-container {&#10;  flex: 1;&#10;  padding: 20px;&#10;}&#10;&#10;.empty-state {&#10;  flex: 1;&#10;  display: flex;&#10;  flex-direction: column;&#10;  justify-content: center;&#10;  align-items: center;&#10;}&#10;&#10;.gallery-container {&#10;  flex: 1;&#10;  display: flex;&#10;  flex-direction: column;&#10;  min-height: 0;&#10;}&#10;&#10;.gallery-grid {&#10;  flex: 1;&#10;  display: grid;&#10;  padding: 20px;&#10;  overflow-y: auto;&#10;  min-height: 0;&#10;}&#10;&#10;.gallery-item {&#10;  position: relative;&#10;  aspect-ratio: 1;&#10;  border-radius: 12px;&#10;  overflow: hidden;&#10;  cursor: pointer;&#10;  transition: all 0.3s ease;&#10;  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);&#10;}&#10;&#10;.gallery-item:hover {&#10;  transform: translateY(-4px);&#10;  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);&#10;}&#10;&#10;.gallery-item:hover .image-overlay {&#10;  opacity: 1;&#10;}&#10;&#10;.gallery-image {&#10;  width: 100%;&#10;  height: 100%;&#10;}&#10;&#10;.image-placeholder,&#10;.image-error {&#10;  width: 100%;&#10;  height: 100%;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  background: var(--el-fill-color-light);&#10;  color: var(--el-text-color-placeholder);&#10;}&#10;&#10;.image-error {&#10;  color: var(--el-color-error);&#10;}&#10;&#10;.image-overlay {&#10;  position: absolute;&#10;  bottom: 0;&#10;  left: 0;&#10;  right: 0;&#10;  background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));&#10;  color: white;&#10;  padding: 16px 12px 12px;&#10;  opacity: 0;&#10;  transition: opacity 0.3s ease;&#10;}&#10;&#10;.image-info {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 4px;&#10;}&#10;&#10;.filename {&#10;  font-weight: 500;&#10;  font-size: 14px;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  white-space: nowrap;&#10;}&#10;&#10;.dimensions {&#10;  font-size: 12px;&#10;  opacity: 0.8;&#10;}&#10;&#10;.pagination-container {&#10;  padding: 20px;&#10;  display: flex;&#10;  justify-content: center;&#10;  border-top: 1px solid var(--el-border-color-light);&#10;  background: var(--el-bg-color);&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 1200px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(3, 1fr) !important;&#10;  }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(2, 1fr) !important;&#10;    padding: 12px;&#10;    gap: 12px !important;&#10;  }&#10;  &#10;  .pagination-container {&#10;    padding: 12px;&#10;  }&#10;}&#10;&#10;@media (max-width: 480px) {&#10;  .gallery-grid {&#10;    grid-template-columns: 1fr !important;&#10;  }&#10;}&#10;&#10;/* 滚动条样式 */&#10;.gallery-grid::-webkit-scrollbar {&#10;  width: 8px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-track {&#10;  background: var(--el-fill-color-lighter);&#10;  border-radius: 4px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb {&#10;  background: var(--el-fill-color-dark);&#10;  border-radius: 4px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb:hover {&#10;  background: var(--el-fill-color-darker);&#10;}&#10;&lt;/style&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/components/index.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/components/index.ts" />
              <option name="updatedContent" value="/**&#10; * 组件统一导出文件&#10; * 建议的组件组织结构：&#10; * &#10; * components/&#10; * ├── base/              # 基础通用组件&#10; * ├── business/          # 业务组件&#10; * │   ├── image/         # 图片相关组件&#10; * │   ├── upload/        # 上传相关组件&#10; * │   └── query/         # 查询相关组件&#10; * ├── layout/            # 布局组件&#10; * ├── ui/                # UI组件(dialogs, panels, forms)&#10; * └── index.ts           # 统一导出&#10; */&#10;&#10;// === 图片相关组件 ===&#10;export { default as ImageCard } from './business/image/ImageCard.vue'&#10;export { default as ImageGrid } from './business/image/ImageGrid.vue'&#10;export { default as ImageViewer } from './business/image/ImageViewer.vue'&#10;export { default as ImagePreview } from './business/image/ImagePreview.vue'&#10;export { default as ImageInfo } from './business/image/ImageInfo.vue'&#10;export { default as ImageGallery } from './business/image/ImageGallery.vue'&#10;&#10;// === 上传相关组件 ===&#10;export { default as UploadQueue } from './business/upload/UploadQueue.vue'&#10;export { default as UploadManager } from './business/upload/UploadManager.vue'&#10;&#10;// === 查询相关组件 ===&#10;export { default as QueryForm } from './business/query/QueryForm.vue'&#10;export { default as FilterPanel } from './business/query/FilterPanel.vue'&#10;&#10;// === UI组件 ===&#10;export { default as SettingsDialog } from './ui/dialogs/SettingsDialog.vue'&#10;&#10;// === 布局组件 ===&#10;export { default as DesktopLayout } from './layout/DesktopLayout.vue'&#10;export { default as MobileLayout } from './layout/MobileLayout.vue'&#10;export { default as TabletLayout } from './layout/TabletLayout.vue'" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/src/stores/image.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/src/stores/image.ts" />
              <option name="updatedContent" value="import { defineStore } from 'pinia'&#10;import { ref, computed } from 'vue'&#10;import type { Image, ImageQueryParams, PageResponse } from '../api'&#10;&#10;export const useImageStore = defineStore('image', () =&gt; {&#10;  // 状态&#10;  const images = ref&lt;Image[]&gt;([])&#10;  const loading = ref(false)&#10;  const error = ref&lt;string | null&gt;(null)&#10;  const totalElements = ref(0)&#10;  const totalPages = ref(0)&#10;  const currentPage = ref(1)&#10;  &#10;  // 查询参数&#10;  const params = ref&lt;ImageQueryParams&gt;({&#10;    page: 1,&#10;    size: 20,&#10;    sortBy: 'createdAt',&#10;    sortOrder: 'desc'&#10;  })&#10;&#10;  // 计算属性&#10;  const hasImages = computed(() =&gt; images.value.length &gt; 0)&#10;  const isEmpty = computed(() =&gt; !loading.value &amp;&amp; images.value.length === 0)&#10;&#10;  // 获取图片URL的方法&#10;  const getImageUrl = (hash: string) =&gt; {&#10;    return `/api/images/${hash}`&#10;  }&#10;&#10;  const getImageThumbnailUrl = (hash: string) =&gt; {&#10;    return `/api/images/${hash}/thumbnail`&#10;  }&#10;&#10;  // 查询图片&#10;  const query = async () =&gt; {&#10;    loading.value = true&#10;    error.value = null&#10;    &#10;    try {&#10;      // 这里应该调用实际的API&#10;      // const response = await imageService.getImages(params.value)&#10;      // 暂时使用模拟数据&#10;      await new Promise(resolve =&gt; setTimeout(resolve, 500))&#10;      &#10;      const mockResponse: PageResponse&lt;Image&gt; = {&#10;        content: [],&#10;        totalElements: 0,&#10;        totalPages: 0,&#10;        page: params.value.page,&#10;        size: params.value.size,&#10;        first: params.value.page === 1,&#10;        last: true&#10;      }&#10;      &#10;      images.value = mockResponse.content&#10;      totalElements.value = mockResponse.totalElements&#10;      totalPages.value = mockResponse.totalPages&#10;      currentPage.value = mockResponse.page&#10;    } catch (err) {&#10;      error.value = err instanceof Error ? err.message : '加载图片失败'&#10;    } finally {&#10;      loading.value = false&#10;    }&#10;  }&#10;&#10;  // 重置状态&#10;  const reset = () =&gt; {&#10;    images.value = []&#10;    loading.value = false&#10;    error.value = null&#10;    totalElements.value = 0&#10;    totalPages.value = 0&#10;    currentPage.value = 1&#10;    params.value = {&#10;      page: 1,&#10;      size: 20,&#10;      sortBy: 'createdAt',&#10;      sortOrder: 'desc'&#10;    }&#10;  }&#10;&#10;  return {&#10;    // 状态&#10;    images,&#10;    loading,&#10;    error,&#10;    totalElements,&#10;    totalPages,&#10;    currentPage,&#10;    params,&#10;    &#10;    // 计算属性&#10;    hasImages,&#10;    isEmpty,&#10;    &#10;    // 方法&#10;    getImageUrl,&#10;    getImageThumbnailUrl,&#10;    query,&#10;    reset&#10;  }&#10;})" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>